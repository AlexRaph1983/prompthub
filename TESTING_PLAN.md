# üß™ –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ø–æ–∏—Å–∫–∞

## üìã –û–±–∑–æ—Ä

–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –ø–æ–∏—Å–∫–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏.

## üéØ –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### **1. Unit —Ç–µ—Å—Ç—ã**

#### **1.1 –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**
```bash
npm test -- --testPathPattern="search-filtering"
```

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏:**
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ emoji –∏–∑ —Å—Ç—Ä–æ–∫
- ‚úÖ –°–∂–∞—Ç–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ –ü–æ–¥—Å—á–µ—Ç –±—É–∫–≤ –≤ —Å—Ç—Ä–æ–∫–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ø-—Å–ª–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –±—É–∫–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è Unicode —Å—Ç—Ä–æ–∫

#### **1.2 –•—É–∫ –ø–æ–∏—Å–∫–∞**
```bash
npm test -- --testPathPattern="useAdminSearch"
```

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏:**
- ‚úÖ Debounce –ª–æ–≥–∏–∫–∞ (600ms)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–ª—å–∫–æ –ø–æ Enter/blur
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ –ø–æ–∏—Å–∫–∞

#### **1.3 –°–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è**
```bash
npm test -- --testPathPattern="search-validation"
```

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏:**
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª–∏–Ω—ã (3-200 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –±—É–∫–≤ (‚â•40%)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–∏–º–≤–æ–ª–æ–≤ (‚â§3)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ Unicode –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

### **2. Integration —Ç–µ—Å—Ç—ã**

#### **2.1 API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
```bash
npm test -- --testPathPattern="api/search-tracking"
```

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏:**
- ‚úÖ POST /api/search-tracking —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ POST /api/search-tracking —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ POST /api/search-tracking –±–µ–∑ —Ñ–ª–∞–≥–∞ finished
- ‚úÖ GET /api/admin/search-metrics
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

#### **2.2 –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
```bash
npm test -- --testPathPattern="search-metrics"
```

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏:**
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ JSON –≤ rejection_reasons

### **3. E2E —Ç–µ—Å—Ç—ã**

#### **3.1 –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**
```bash
npx playwright test __tests__/e2e/search-validation.e2e.test.ts
```

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏:**
- ‚úÖ –í–≤–æ–¥ –≤–æ –≤—Ä–µ–º—è –ø–µ—á–∞—Ç–∏ (debounce)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ Enter
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ blur
- ‚úÖ –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –ö–æ—Ä–æ—Ç–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã (<3 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚úÖ –¶–∏—Ñ—Ä–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (—Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã)
- ‚úÖ –°–∏–º–≤–æ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (—Ç–æ–ª—å–∫–æ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã)
- ‚úÖ Unicode —Å—Ç—Ä–æ–∫–∏
- ‚úÖ Emoji –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö
- ‚úÖ –°—Ç–æ–ø-—Å–ª–æ–≤–∞

#### **3.2 –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**
```bash
npx playwright test __tests__/e2e/admin-search.e2e.test.ts
```

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏:**
- ‚úÖ –ü–æ–∏—Å–∫ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- ‚úÖ –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø—Ä–∏ –≤–≤–æ–¥–µ
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ –ø–æ–∏—Å–∫–∞
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏

## üîß –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **4.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ K6**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ K6
npm install -g k6

# –ó–∞–ø—É—Å–∫ –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
k6 run load-tests/search-tracking-load.js
```

### **4.2 –°—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∞–≥—Ä—É–∑–∫–∏**
- **–ù–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞:** 10 RPS, 5 –º–∏–Ω—É—Ç
- **–°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞:** 50 RPS, 10 –º–∏–Ω—É—Ç
- **–í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞:** 100 RPS, 5 –º–∏–Ω—É—Ç
- **–ü–∏–∫–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞:** 200 RPS, 2 –º–∏–Ω—É—Ç—ã

### **4.3 –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
- ‚úÖ –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API (<100ms)
- ‚úÖ –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (RPS)
- ‚úÖ –û—à–∏–±–∫–∏ (<1%)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU (<80%)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ (<80%)

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### **5.1 Prometheus –º–µ—Ç—Ä–∏–∫–∏**
```yaml
# prometheus.yml
scrape_configs:
  - job_name: 'prompthub'
    static_configs:
      - targets: ['localhost:3000']
```

### **5.2 Grafana –¥–∞—à–±–æ—Ä–¥—ã**
- **Search Metrics Dashboard**
- **API Performance Dashboard**
- **Error Rate Dashboard**

### **5.3 –ê–ª–µ—Ä—Ç—ã**
- ‚úÖ `rejected_rate > 5%` - –≤—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π
- ‚úÖ `api_response_time > 500ms` - –º–µ–¥–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- ‚úÖ `error_rate > 1%` - –≤—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫
- ‚úÖ `cpu_usage > 80%` - –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ CPU
- ‚úÖ `memory_usage > 80%` - –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –ø–∞–º—è—Ç–∏

## üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### **6.1 CI/CD Pipeline**
```yaml
# .github/workflows/test.yml
name: Test Suite
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm ci
      - run: npm test
      - run: npm run test:e2e
      - run: k6 run load-tests/
```

### **6.2 Pre-commit hooks**
```json
{
  "husky": {
    "hooks": {
      "pre-commit": "npm test && npm run lint"
    }
  }
}
```

## üìà –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å

### **7.1 –¢–µ—Å—Ç–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã**
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ (>90%)
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã unit —Ç–µ—Å—Ç–æ–≤
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã integration —Ç–µ—Å—Ç–æ–≤
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã e2e —Ç–µ—Å—Ç–æ–≤
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

### **7.2 –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞**
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–≥–æ–≤
- ‚úÖ –í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## üîç –û—Ç–ª–∞–¥–∫–∞

### **8.1 –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
```typescript
// –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
console.log('üîç Search query tracked:', {
  query: processedQuery,
  userId,
  timestamp: new Date().toISOString(),
  metrics: validationMetrics
})
```

### **8.2 –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞**
- ‚úÖ Request ID –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- ‚úÖ –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –¶–µ–ø–æ—á–∫–∞ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –û—à–∏–±–∫–∏ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

## üìã –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### **9.1 Pre-deployment**
- [ ] –í—Å–µ unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –í—Å–µ integration —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –í—Å–µ e2e —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- [ ] –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ >90%
- [ ] –õ–∏–Ω—Ç–µ—Ä –Ω–µ –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–æ–∫
- [ ] –°–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ

### **9.2 Post-deployment**
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ê–ª–µ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è
- [ ] –î–∞—à–±–æ—Ä–¥—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç –¥–∞–Ω–Ω—ã–µ
- [ ] –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –Ω–æ—Ä–º–µ

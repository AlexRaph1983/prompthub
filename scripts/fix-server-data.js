const { PrismaClient } = require('@prisma/client')

const prisma = new PrismaClient({ log: ['warn', 'error'] })

async function fixServerData() {
  try {
    console.log('üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ...')
    
    // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –ø—Ä–æ–º–ø—Ç—ã
    const prompts = await prisma.prompt.findMany({
      select: {
        id: true,
        title: true,
        description: true,
        prompt: true,
        authorId: true
      }
    })
    
    console.log(`–ù–∞–π–¥–µ–Ω–æ –ø—Ä–æ–º–ø—Ç–æ–≤: ${prompts.length}`)
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫–∏–µ –ø—Ä–æ–º–ø—Ç—ã –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å
    const promptsToFix = prompts.filter(p => 
      !p.description || p.description.length === 0 || 
      !p.prompt || p.prompt.length === 0
    )
    
    console.log(`–ü—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: ${promptsToFix.length}`)
    
    if (promptsToFix.length === 0) {
      console.log('‚úÖ –í—Å–µ –ø—Ä–æ–º–ø—Ç—ã —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!')
      return
    }
    
    // –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –∫–∞–∂–¥—ã–π –ø—Ä–æ–º–ø—Ç
    for (const prompt of promptsToFix) {
      console.log(`\n–ò—Å–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–æ–º–ø—Ç: ${prompt.title}`)
      
      // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
      let description = ''
      if (!prompt.description || prompt.description.length === 0) {
        if (prompt.title.includes('SUNO')) {
          description = '–°–æ–∑–¥–∞–π —Ç—Ä–µ–∫ –≤ SUNO, —É–∫–∞–∑–∞–≤ —Å—Ç–∏–ª—å, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ BPM ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è TikTok –∏ —Å–∞—É–Ω–¥—Ç—Ä–µ–∫–æ–≤.'
        } else if (prompt.title.includes('BPM')) {
          description = '–ü—Ä–æ–º–ø—Ç –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å BPM –∏ —Ä–∏—Ç–º–∏–∫—É –ø–æ —Ç–µ–º–ø—É –∏–ª–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ç—Ä–µ–∫–∞, –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è –±–∏—Ç–º–µ–π–∫–µ—Ä–æ–≤.'
        } else if (prompt.title.includes('—ç—Å—Å–µ')) {
          description = '–ü—Ä–æ–º–ø—Ç –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–ø–∏—Å–∞—Ç—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —ç—Å—Å–µ –∏–ª–∏ —Å–æ—á–∏–Ω–µ–Ω–∏–µ –Ω–∞ —Ç–µ–º—É –ø–∞–º—è—Ç–∏, —É—Ç—Ä–∞—Ç—ã –∏ –Ω–∞—Å–ª–µ–¥–∏—è.'
        } else if (prompt.title.includes('—Ç—Ä–µ–∫')) {
          description = '–°–æ–∑–¥–∞–π –ø–µ—Å–Ω—é —Å —è—Ä–∫–∏–º –≤–æ–∫–∞–ª–æ–º –∏ –∑–∞–ø–æ–º–∏–Ω–∞—é—â–∏–º—Å—è –ø—Ä–∏–ø–µ–≤–æ–º –≤ —Å—Ç–∏–ª–µ Suno Master ‚Äî –∏–¥–µ–∞–ª—å–Ω–∞ –¥–ª—è –∫–ª–∏–ø–æ–≤ –∏ —Ä–µ–ª–∏–∑–æ–≤.'
        } else if (prompt.title.includes('–≤–∏–¥–µ–æ')) {
          description = '–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –∫–æ—Ä–æ—Ç–∫–æ–µ —é–º–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –≤–∏–¥–µ–æ –≤ —Å—Ç–∏–ª–µ SORA, –ø–æ—Å–≤—è—â—ë–Ω–Ω–æ–µ –•—ç–ª–ª–æ—É–∏–Ω—É ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è TikTok.'
        } else if (prompt.title.includes('–ø–æ—Ä—Ç—Ä–µ—Ç')) {
          description = '–°–æ–∑–¥–∞–π —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø–æ—Ä—Ç—Ä–µ—Ç —á–µ–ª–æ–≤–µ–∫–∞ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —Å—Ç–∏–ª–µ ‚Äî —Ä–µ–∞–ª–∏–∑–º, –∫–æ–º–∏–∫—Å –∏–ª–∏ –∞–∫–≤–∞—Ä–µ–ª—å.'
        } else if (prompt.title.includes('–ª–æ–≥–æ—Ç–∏–ø')) {
          description = '–°–æ–∑–¥–∞–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ª–æ–≥–æ—Ç–∏–ø —Å —É—á—ë—Ç–æ–º –Ω–∏—à–∏ –∏ —Ñ–∏—Ä–º–µ–Ω–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤, –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –¥–ª—è —Å—Ç–∞—Ä—Ç–∞–ø–∞.'
        } else {
          description = '–ü—Ä–æ–º–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ò–ò-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.'
        }
      } else {
        description = prompt.description
      }
      
      // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–æ–º–ø—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
      let promptText = ''
      if (!prompt.prompt || prompt.prompt.length === 0) {
        if (prompt.title.includes('SUNO')) {
          promptText = '–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π —Ç—Ä–µ–∫ –≤ —Å—Ç–∏–ª–µ {–∂–∞–Ω—Ä} —Å —Ç–µ–º–ø–æ–º {bpm} BPM –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ–º {–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ}. –î–æ–±–∞–≤—å –≤–æ–∫–∞–ª {—Ç–∏–ø_–≤–æ–∫–∞–ª–∞} –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É {–∞—Ç–º–æ—Å—Ñ–µ—Ä–∞}.'
        } else if (prompt.title.includes('BPM')) {
          promptText = '–†–∞—Å—Å—á–∏—Ç–∞–π BPM, –µ—Å–ª–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç—Ä–µ–∫–∞ {–¥–ª–∏–Ω–∞} —Å–µ–∫—É–Ω–¥ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–∫—Ç–æ–≤ {—Ç–∞–∫—Ç—ã}. –¢–∞–∫–∂–µ —É–∫–∞–∂–∏, –∫–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ–º–ø –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è {–Ω–æ–≤–∞—è_—Å–∫–æ—Ä–æ—Å—Ç—å} BPM.'
        } else if (prompt.title.includes('—ç—Å—Å–µ')) {
          promptText = '–ù–∞–ø–∏—à–∏ —ç—Å—Å–µ –Ω–∞ —Ç–µ–º—É ¬´–ü–∞–º—è—Ç—å –æ —á–µ–ª–æ–≤–µ–∫–µ¬ª. –†–∞—Å–∫—Ä–æ–π –∏–¥–µ—é —á–µ—Ä–µ–∑ –ª–∏—á–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é, —ç–º–æ—Ü–∏–∏ –∏ —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–π —Å–º—ã—Å–ª. –°—Ç–∏–ª—å ‚Äî –ª–∏—Ä–∏–∫–æ-–æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–π, –æ–±—ä—ë–º {–æ–±—ä–µ–º} —Å–ª–æ–≤.'
        } else if (prompt.title.includes('—Ç—Ä–µ–∫')) {
          promptText = '–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –ø–µ—Å–Ω—é –≤ —Å—Ç–∏–ª–µ Suno Master —Å —Ç–µ–º–æ–π {—Ç–µ–º–∞}, –≥–¥–µ –≤–æ–∫–∞–ª –ø–µ—Ä–µ–¥–∞—ë—Ç {—ç–º–æ—Ü–∏–∏}. –ê—Ä–∞–Ω–∂–∏—Ä–æ–≤–∫–∞ –≤ –∂–∞–Ω—Ä–µ {–∂–∞–Ω—Ä}, —Å –º–æ—â–Ω—ã–º –ø—Ä–∏–ø–µ–≤–æ–º –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã–º–∏ —Å–∏–Ω—Ç–∞–º–∏.'
        } else if (prompt.title.includes('–≤–∏–¥–µ–æ')) {
          promptText = '–°–æ–∑–¥–∞–π –∫–æ—Ä–æ—Ç–∫–æ–µ –≤–∏–¥–µ–æ –Ω–∞ —Ç–µ–º—É –•—ç–ª–ª–æ—É–∏–Ω–∞: {—Å—Ü–µ–Ω–∞}, {–ø–µ—Ä—Å–æ–Ω–∞–∂–∏}, {—ç–º–æ—Ü–∏—è}. –î–æ–±–∞–≤—å —Å–≤–µ—Ç –æ—Ç —Å–≤–µ—á–µ–π, –¥—ã–º –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –º–∏—Å—Ç–∏–∫–∏.'
        } else if (prompt.title.includes('–ø–æ—Ä—Ç—Ä–µ—Ç')) {
          promptText = '–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –ø–æ—Ä—Ç—Ä–µ—Ç —á–µ–ª–æ–≤–µ–∫–∞ {–æ–ø–∏—Å–∞–Ω–∏–µ} –≤ —Å—Ç–∏–ª–µ {—Å—Ç–∏–ª—å}. –î–æ–±–∞–≤—å —Ñ–æ–Ω–æ–≤–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ –∏ –º—è–≥–∫–∏–µ —Ç–µ–Ω–∏ –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç–∏.'
        } else if (prompt.title.includes('–ª–æ–≥–æ—Ç–∏–ø')) {
          promptText = '–°–æ–∑–¥–∞–π –∫–æ–Ω—Ü–µ–ø—Ü–∏—é –ª–æ–≥–æ—Ç–∏–ø–∞ –¥–ª—è –±—Ä–µ–Ω–¥–∞ {–Ω–∞–∑–≤–∞–Ω–∏–µ} –≤ –Ω–∏—à–µ {–Ω–∏—à–∞}. –ò—Å–ø–æ–ª—å–∑—É–π —Ü–≤–µ—Ç–∞ {—Ü–≤–µ—Ç–∞} –∏ —Å—Ç–∏–ª—å {—Å—Ç–∏–ª—å}. –î–æ–±–∞–≤—å –∏–¥–µ—é, –æ—Ç—Ä–∞–∂–∞—é—â—É—é —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–∏.'
        } else {
          promptText = '–°–æ–∑–¥–∞–π –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞ —Ç–µ–º—É {—Ç–µ–º–∞} –≤ —Å—Ç–∏–ª–µ {—Å—Ç–∏–ª—å} –¥–ª—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏ {–∞—É–¥–∏—Ç–æ—Ä–∏—è}.'
        }
      } else {
        promptText = prompt.prompt
      }
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–º–ø—Ç
      await prisma.prompt.update({
        where: { id: prompt.id },
        data: {
          description: description,
          prompt: promptText
        }
      })
      
      console.log(`‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω: ${prompt.title}`)
      console.log(`   Description: "${description}"`)
      console.log(`   Prompt: "${promptText}"`)
    }
    
    console.log(`\nüéâ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ ${promptsToFix.length} –ø—Ä–æ–º–ø—Ç–æ–≤!`)
    
  } catch (e) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:', e.message)
  } finally {
    await prisma.$disconnect()
  }
}

fixServerData()

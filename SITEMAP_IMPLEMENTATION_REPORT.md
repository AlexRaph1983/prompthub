# üìä –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ SEO Sitemap

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Sitemap
- ‚úÖ **–ì–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å** `/sitemap.xml` —Å —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–∞—Ä—Ç—ã
- ‚úÖ **Root sitemap** `/sitemaps/root.xml` –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚úÖ **–õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã** `/sitemaps/ru.xml`, `/sitemaps/en.xml`
- ‚úÖ **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏** `/sitemaps/categories.xml` —Å hreflang
- ‚úÖ **–¢–µ–≥–∏** `/sitemaps/tags.xml` (—Ç–æ–ª—å–∫–æ —Å ‚â•1 –ø—Ä–æ–º–ø—Ç–æ–º)
- ‚úÖ **–ü–∞–≥–∏–Ω–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤** `/sitemaps/prompts-0001.xml`, `-0002.xml`, ...

### 2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- ‚úÖ **lastmod** –∏–∑ –ë–î (updatedAt –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–µ–π)
- ‚úÖ **changefreq** –∏ **priority** (root: daily/1.0, categories: weekly/0.7, tags: weekly/0.6, prompts: monthly/0.8)
- ‚úÖ **hreflang** –º–µ–∂–¥—É RU/EN –≤–µ—Ä—Å–∏—è–º–∏ + x-default
- ‚úÖ **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤** (/api/*, /admin/*, /dashboard/*, auth/settings)
- ‚úÖ **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** –ø—Ä–∏ >10k –ø—Ä–æ–º–ø—Ç–æ–≤ (–±–ª–æ–∫–∏ –ø–æ 10k URL)

### 3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ Next.js 14
- ‚úÖ **Route handlers** –¥–ª—è –≤—Å–µ—Ö sitemap —Ä–æ—É—Ç–æ–≤
- ‚úÖ **Content-Type: application/xml** –¥–ª—è –≤—Å–µ—Ö –∫–∞—Ä—Ç
- ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** (revalidate=3600 –¥–ª—è –∫–∞—Ä—Ç, static –¥–ª—è robots)
- ‚úÖ **–°—Ç—Ä–∏–º–∏–Ω–≥** –±–æ–ª—å—à–∏—Ö XML –æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### 4. Robots.txt
- ‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π robots.txt** —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –¥–ª—è –Ø–Ω–¥–µ–∫—Å–∞ –∏ Google
- ‚úÖ **Host –¥–∏—Ä–µ–∫—Ç–∏–≤–∞** –¥–ª—è –Ø–Ω–¥–µ–∫—Å–∞
- ‚úÖ **Clean-param** –¥–ª—è UTM –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤** –∏ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏** (_next/static/, public/)

### 5. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- ‚úÖ **–ò–Ω–¥–µ–∫—Å—ã Prisma** –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:
  - `@@index([category])`
  - `@@index([updatedAt])`
  - `@@index([category, updatedAt])`
- ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å TTL (1 —á–∞—Å –¥–ª—è –∫–∞—Ä—Ç)
- ‚úÖ **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è URL** –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

### 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **Unit —Ç–µ—Å—Ç—ã** –¥–ª—è —É—Ç–∏–ª–∏—Ç sitemap
- ‚úÖ **E2E —Ç–µ—Å—Ç—ã** –¥–ª—è –≤—Å–µ—Ö sitemap —Ä–æ—É—Ç–æ–≤
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è XML** —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ hreflang** –∏ lastmod –¥–∞—Ç
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

### 7. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ DevOps
- ‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- ‚úÖ **–°–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏** –ë–î
- ‚úÖ **–°–∫—Ä–∏–ø—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏** sitemap
- ‚úÖ **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é**
- ‚úÖ **Troubleshooting** –≥–∞–π–¥

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```
lib/sitemap.ts                           # –£—Ç–∏–ª–∏—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
app/sitemap.xml/route.ts                 # –ì–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å sitemap
app/robots.txt/route.ts                  # Robots.txt —Ä–æ—É—Ç
app/sitemaps/root.xml/route.ts          # Root sitemap
app/sitemaps/[locale].xml/route.ts      # –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã
app/sitemaps/categories.xml/route.ts    # –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
app/sitemaps/tags.xml/route.ts          # –¢–µ–≥–∏
app/sitemaps/prompts-[page].xml/route.ts # –ü–∞–≥–∏–Ω–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤
```

### –¢–µ—Å—Ç—ã
```
__tests__/lib/sitemap.test.ts           # Unit —Ç–µ—Å—Ç—ã
__tests__/e2e/sitemap.e2e.test.ts      # E2E —Ç–µ—Å—Ç—ã
```

### –°–∫—Ä–∏–ø—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```
scripts/migrate-sitemap-indexes.js      # –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î
scripts/validate-sitemap.js             # –í–∞–ª–∏–¥–∞—Ü–∏—è sitemap
deploy-sitemap.ps1                      # –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
SEO_SITEMAP_DOCUMENTATION.md           # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
SITEMAP_DEPLOY_INSTRUCTIONS.md         # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é
SITEMAP_IMPLEMENTATION_REPORT.md       # –≠—Ç–æ—Ç –æ—Ç—á–µ—Ç
```

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

### Prisma Schema
```prisma
model Prompt {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
  @@index([category])           # –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  @@index([updatedAt])          # –î–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –¥–∞—Ç–µ
  @@index([category, updatedAt]) # –°–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å
}
```

### Package.json
```json
{
  "scripts": {
    "test:sitemap": "vitest run __tests__/lib/sitemap.test.ts",
    "test:sitemap:e2e": "npx playwright test __tests__/e2e/sitemap.e2e.test.ts",
    "sitemap:migrate": "node scripts/migrate-sitemap-indexes.js",
    "sitemap:validate": "node scripts/validate-sitemap.js"
  }
}
```

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –¥–µ–ø–ª–æ—é

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ - –í–°–ï –í–´–ü–û–õ–ù–ï–ù–´ ‚úÖ

1. ‚úÖ **robots.txt –≤–∞–ª–∏–¥–µ–Ω** —Å Host, Clean-param (–Ø–Ω–¥–µ–∫—Å), Sitemap
2. ‚úÖ **sitemap.xml –≤–∞–ª–∏–¥–µ–Ω** —Å —Ä–∞–±–æ—á–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–∞—Ä—Ç—ã
3. ‚úÖ **–î–æ—á–µ—Ä–Ω–∏–µ –∫–∞—Ä—Ç—ã –≤–∞–ª–∏–¥–Ω—ã** –ø–æ XSD —Å lastmod, changefreq, priority
4. ‚úÖ **hreflang –º–µ–∂–¥—É RU/EN** –¥–ª—è –æ–¥–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ + x-default
5. ‚úÖ **–ù–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤** –≤ –∫–∞—Ä—Ç–∞—Ö
6. ‚úÖ **–ù–µ—Ç –ø—É—Å—Ç—ã—Ö —Ç–µ–≥-—Å—Ç—Ä–∞–Ω–∏—Ü** (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ ‚â•1 –ø—Ä–æ–º–ø—Ç—É)
7. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ** –ø—Ä–∏ >10k –ø—Ä–æ–º–ø—Ç–æ–≤
8. ‚úÖ **E2E —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç** ‚úÖ
9. ‚úÖ **PageSpeed –Ω–µ —Ä—É–≥–∞–µ—Ç—Å—è** (–∫–∞—Ä—Ç—ã < 50MB)

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–ò–Ω–¥–µ–∫—Å—ã –ë–î** –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ –¥–∞—Ç–∞–º
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ 1 —á–∞—Å
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** –ø–æ 10k URL –Ω–∞ –∫–∞—Ä—Ç—É
- **–°—Ç—Ä–∏–º–∏–Ω–≥** XML –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** URL –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –æ—à–∏–±–æ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- **–ú–µ—Ç—Ä–∏–∫–∏** –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** XML —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **–ü—Ä–æ–≤–µ—Ä–∫–∞** –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –∫–∞—Ä—Ç

## üéØ SEO –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### –î–ª—è –Ø–Ω–¥–µ–∫—Å–∞
- ‚úÖ Host –¥–∏—Ä–µ–∫—Ç–∏–≤–∞ –≤ robots.txt
- ‚úÖ Clean-param –¥–ª—è UTM –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ hreflang
- ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏ —á–∞—Å—Ç–æ—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –î–ª—è Google
- ‚úÖ –í–∞–ª–∏–¥–Ω—ã–π XML sitemap
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ lastmod –¥–∞—Ç—ã
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è –±–æ–ª—å—à–∏—Ö –∫–∞—Ä—Ç
- ‚úÖ Hreflang –¥–ª—è –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏

### –û–±—â–∏–µ
- ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö URL
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
1. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î**: `npm run sitemap:migrate`
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å sitemap**: `npm run sitemap:validate`
3. **–î–æ–±–∞–≤–∏—Ç—å –≤ Google Search Console**
4. **–î–æ–±–∞–≤–∏—Ç—å –≤ –Ø–Ω–¥–µ–∫—Å.–í–µ–±–º–∞—Å—Ç–µ—Ä**

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤**: `pm2 logs`
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞—Ä—Ç**: –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏**: –≤ –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞—Ö
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü–æ–ª–Ω–∞—è SEO-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!**

- ‚úÖ –í—Å–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è
- ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**Sitemap –≥–æ—Ç–æ–≤ –∫ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞–º–∏! üöÄ**

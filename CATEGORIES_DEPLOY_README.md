# –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
npx prisma migrate dev --name add-categories-hierarchy
```

### 2. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏
```bash
node scripts/seed-categories.js
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–æ–≤
```bash
node scripts/update-category-counts.js update
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
```bash
npm run dev
```

## –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Category** - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π –∏ i18n
- **Tag** - —Ç–µ–≥–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π NSFW
- **PromptTag** - —Å–≤—è–∑—å –º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### üé® –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **CategoryNav** - –ª–µ–≤–æ–µ –º–µ–Ω—é –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞
- **CategoryDrawer** - –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
- **NsfwWarning** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –¥–ª—è –≤–∑—Ä–æ—Å–ª–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### üìÑ –°—Ç—Ä–∞–Ω–∏—Ü—ã
- `/[locale]/category/[slug]` - —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- SEO-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### üõ†Ô∏è –£—Ç–∏–ª–∏—Ç—ã
- `lib/categories.ts` - —Ä–∞–±–æ—Ç–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- `lib/seo.ts` - SEO –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- `lib/url.ts` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è URL
- `lib/filters.ts` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
app/[locale]/(public)/
‚îú‚îÄ‚îÄ layout.tsx                 # –¢—Ä—ë—Ö–∫–æ–ª–æ–Ω–æ—á–Ω—ã–π layout
‚îú‚îÄ‚îÄ CategoryNav.tsx            # –õ–µ–≤–æ–µ –º–µ–Ω—é (client)
‚îú‚îÄ‚îÄ CategoryNavServer.tsx      # –°–µ—Ä–≤–µ—Ä–Ω—ã–π wrapper
‚îú‚îÄ‚îÄ CategoryDrawer.tsx         # –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é (client)
‚îú‚îÄ‚îÄ CategoryDrawerServer.tsx   # –°–µ—Ä–≤–µ—Ä–Ω—ã–π wrapper
‚îú‚îÄ‚îÄ NsfwWarning.tsx           # NSFW –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
‚îî‚îÄ‚îÄ category/[slug]/
    ‚îî‚îÄ‚îÄ page.tsx              # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

lib/
‚îú‚îÄ‚îÄ categories.ts              # API –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
‚îú‚îÄ‚îÄ seo.ts                    # SEO —É—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ url.ts                    # URL –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ filters.ts                # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è

scripts/
‚îú‚îÄ‚îÄ seed-categories.js         # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏
‚îî‚îÄ‚îÄ update-category-counts.js # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–æ–≤

__tests__/
‚îú‚îÄ‚îÄ categories.test.ts         # Unit —Ç–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ e2e/categories.spec.ts    # E2E —Ç–µ—Å—Ç—ã
```

## –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- **–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è —é—Ä–∏—Å—Ç–æ–≤** (Legal)
- **–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –≤—Ä–∞—á–µ–π** (Health)
- **–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –æ–±—É—á–µ–Ω–∏—è** (Education)
- **–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤** (Marketing & Writing)
- **–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ñ–æ—Ç–æ** (Image)
- **–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –≤–∏–¥–µ–æ** (Video)
- –ò –µ—â—ë 16 –∫–∞—Ç–µ–≥–æ—Ä–∏–π...

### –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è Image
- **–§–æ—Ç–æ—Å–µ—Å—Å–∏–∏** (Photography)
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ** (Photo Editing)
- **NSFW 18+** (NSFW)

### –¢–µ–≥–∏
- ChatGPT, Claude, Gemini
- Midjourney, DALL-E, Stable Diffusion
- NSFW, –ë–µ—Å–ø–ª–∞—Ç–Ω–æ, –ü—Ä–µ–º–∏—É–º
- –ü–æ–ø—É–ª—è—Ä–Ω–æ–µ, –ù–æ–≤–æ–µ

## SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ title –∏ description
- Hreflang –¥–ª—è ru/en
- Open Graph –∏ Twitter Cards
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### URL —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- `/ru/category/legal` - —Ä—É—Å—Å–∫–∞—è –≤–µ—Ä—Å–∏—è
- `/en/category/legal` - –∞–Ω–≥–ª–∏–π—Å–∫–∞—è –≤–µ—Ä—Å–∏—è
- `/ru/category/image?nsfw=true` - —Å NSFW —Ñ–∏–ª—å—Ç—Ä–æ–º

## –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

### –î–µ—Å–∫—Ç–æ–ø (‚â•1024px)
- –¢—Ä—ë—Ö–∫–æ–ª–æ–Ω–æ—á–Ω—ã–π layout
- Sticky –ª–µ–≤–æ–µ –º–µ–Ω—é
- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

### –ú–æ–±–∏–ª—å–Ω—ã–π (<1024px)
- –û–¥–Ω–æ–∫–æ–ª–æ–Ω–æ—á–Ω—ã–π layout
- Drawer –º–µ–Ω—é —Å–ª–µ–≤–∞
- Touch-friendly –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã
```bash
npm run test categories.test.ts
```

### E2E —Ç–µ—Å—Ç—ã
```bash
npm run test:e2e categories.spec.ts
```

### Lighthouse
```bash
npm run lighthouse
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—á—ë—Ç—á–∏–∫–∏ –ø—Ä–æ–º–ø—Ç–æ–≤
```bash
# –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å—á—ë—Ç—á–∏–∫–∏
node scripts/update-category-counts.js update

# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
node scripts/update-category-counts.js stats

# –ü–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç
node scripts/update-category-counts.js full
```

### –õ–æ–≥–∏
- –û—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- NSFW –¥–æ—Å—Ç—É–ø –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- SEO –º–µ—Ç—Ä–∏–∫–∏

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### NSFW –∫–æ–Ω—Ç–µ–Ω—Ç
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤–æ–∑—Ä–∞—Å—Ç–∞
- –ó–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –≤ localStorage
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–∞–≥–æ–≤ –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è NSFW —Ñ–ª–∞–≥–æ–≤

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –°—á—ë—Ç—á–∏–∫–∏ –ø—Ä–æ–º–ø—Ç–æ–≤ –≤ –ë–î
- Revalidation: 300-900 —Å–µ–∫—É–Ω–¥
- –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Å—ã–ª–æ–∫

### –ò–Ω–¥–µ–∫—Å—ã
- `idx_category_parent_id`
- `idx_category_slug`
- `idx_category_active_sort`
- `idx_tag_slug`
- `idx_tag_nsfw`

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã: `npx prisma studio`
2. –û–±–Ω–æ–≤–∏—Ç—å —Å—á—ë—Ç—á–∏–∫–∏: `node scripts/update-category-counts.js update`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Å NSFW
1. –û—á–∏—Å—Ç–∏—Ç—å localStorage
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø–∞

### SEO –ø—Ä–æ–±–ª–µ–º—ã
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ DevTools
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å hreflang –∞—Ç—Ä–∏–±—É—Ç—ã

## –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Redis
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
1. –û–±–Ω–æ–≤–∏—Ç—å `scripts/seed-categories.js`
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–¥ —Å–∫—Ä–∏–ø—Ç
3. –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –≤ `messages/`
4. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ–≥–æ–≤
1. –°–æ–∑–¥–∞—Ç—å —Ç–µ–≥ —á–µ—Ä–µ–∑ Prisma Studio
2. –û–±–Ω–æ–≤–∏—Ç—å —Å—á—ë—Ç—á–∏–∫–∏
3. –î–æ–±–∞–≤–∏—Ç—å –≤ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–µ–≥–∏

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ë–î
3. –û–±–Ω–æ–≤–∏—Ç—å —Å—á—ë—Ç—á–∏–∫–∏
4. –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞
